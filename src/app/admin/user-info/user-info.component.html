<div class="wrap">
  <div class="wrap-con">
    <div class="logo">
      <img src="assets/images/logo.png" alt="KSEA logo" />
      <span>KSEA User Info (Authorization Only)</span>
    </div>
  </div>
  <div class="wrap-form">
    <input
      id="emails"
      type="text"
      pInputText
      [style]="{ width: '80%' }"
      [(ngModel)]="idListStr"
    />
    <button
      pButton
      type="button"
      [disabled]="loading"
      [style]="{ margin: '5px' }"
      label="Request by ID"
      icon="pi pi-save"
      class="p-button-info p-button-sm"
      (click)="query()"
    ></button>

    <p-table
      #DT
      *ngIf="list && list.length > 0 && !loading"
      [value]="list"
      [tableStyle]="{ 'min-width': '50rem' }"
      dataKey="id"
      [showCurrentPageReport]="true"
      [rows]="10"
      [rowsPerPageOptions]="[10, 25, 50]"
      [paginator]="true"
      [loading]="loading"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="id">ID <p-sortIcon field="id"></p-sortIcon></th>
          <th pSortableColumn="email">
            email <p-sortIcon field="email"></p-sortIcon>
          </th>
          <th pSortableColumn="status">
            Membership Status <p-sortIcon field="status"></p-sortIcon>
          </th>
          <th pSortableColumn="expirationDate">
            Expiring <p-sortIcon field="expirationDate"></p-sortIcon>
          </th>
          <th pSortableColumn="chapter">
            Chapter <p-sortIcon field="chapter"></p-sortIcon>
          </th>
        </tr>
        <tr>
          <th>
            <p-columnFilter type="text" field="id"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="email"></p-columnFilter>
          </th>
          <th><p-columnFilter type="text" field="status"></p-columnFilter></th>
          <th>
            <p-columnFilter type="text" field="expirationDate"></p-columnFilter>
          </th>
          <th><p-columnFilter type="text" field="chapter"></p-columnFilter></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user>
        <tr>
          <td>{{ user.id }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.status }}</td>
          <td>{{ user.expirationDate | date : "MM/dd/yyyy" }}</td>
          <td>{{ user.chapter }}</td>
        </tr>
      </ng-template>
    </p-table>

    <span
      class="spinner-border spinner-border-sm"
      role="status"
      aria-hidden="true"
      *ngIf="loading"
    ></span>
  </div>
</div>
